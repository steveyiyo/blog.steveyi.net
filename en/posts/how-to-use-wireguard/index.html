<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Using WireGuard on Linux | SteveYi's Blog</title><meta name=keywords content="BGP,server,WireGuard"><meta name=description content="WireGuard is a point-to-point encryption network. I have been using it to manage/connect all my cloud servers.
Today, let&rsquo;s share how to use WireGuard!
Install WireGuard Basically, the WireGuard Install Page provides complete installation methods and commands for various versions, so you can refer to it directly.
Create WireGuard Profile First, go to the WireGuard installation folder. If it does not exist, please create it.
cd /etc/wireguard Use the command to generate a public and private key, and use &ldquo;cat&rdquo; to view the contents of the public and private keys."><meta name=author content="SteveYi"><link rel=canonical href=https://blog.steveyi.net/en/posts/how-to-use-wireguard/><link crossorigin=anonymous href=/assets/css/stylesheet.bccfefac377bc340f06c260aed1bddf49a4354816d7c570d6aac75a997986c95.css integrity="sha256-vM/vrDd7w0DwbCYK7Rvd9JpDVIFtfFcNaqx1qZeYbJU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.steveyi.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.steveyi.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.steveyi.net/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.steveyi.net/apple-touch-icon.png><link rel=mask-icon href=https://blog.steveyi.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.steveyi.net/en/posts/how-to-use-wireguard/><link rel=alternate hreflang=tw href=https://blog.steveyi.net/posts/how-to-use-wireguard/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-CPGWT2M3VT"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CPGWT2M3VT",{anonymize_ip:!1})}</script><meta property="og:title" content="Using WireGuard on Linux"><meta property="og:description" content="WireGuard is a point-to-point encryption network. I have been using it to manage/connect all my cloud servers.
Today, let&rsquo;s share how to use WireGuard!
Install WireGuard Basically, the WireGuard Install Page provides complete installation methods and commands for various versions, so you can refer to it directly.
Create WireGuard Profile First, go to the WireGuard installation folder. If it does not exist, please create it.
cd /etc/wireguard Use the command to generate a public and private key, and use &ldquo;cat&rdquo; to view the contents of the public and private keys."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.steveyi.net/en/posts/how-to-use-wireguard/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-05-16T11:51:52+00:00"><meta property="article:modified_time" content="2020-05-16T11:51:52+00:00"><meta property="og:site_name" content="SteveYi's Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Using WireGuard on Linux"><meta name=twitter:description content="WireGuard is a point-to-point encryption network. I have been using it to manage/connect all my cloud servers.
Today, let&rsquo;s share how to use WireGuard!
Install WireGuard Basically, the WireGuard Install Page provides complete installation methods and commands for various versions, so you can refer to it directly.
Create WireGuard Profile First, go to the WireGuard installation folder. If it does not exist, please create it.
cd /etc/wireguard Use the command to generate a public and private key, and use &ldquo;cat&rdquo; to view the contents of the public and private keys."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.steveyi.net/en/posts/"},{"@type":"ListItem","position":2,"name":"Using WireGuard on Linux","item":"https://blog.steveyi.net/en/posts/how-to-use-wireguard/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Using WireGuard on Linux","name":"Using WireGuard on Linux","description":"WireGuard is a point-to-point encryption network. I have been using it to manage/connect all my cloud servers.\nToday, let\u0026rsquo;s share how to use WireGuard!\nInstall WireGuard Basically, the WireGuard Install Page provides complete installation methods and commands for various versions, so you can refer to it directly.\nCreate WireGuard Profile First, go to the WireGuard installation folder. If it does not exist, please create it.\ncd /etc/wireguard Use the command to generate a public and private key, and use \u0026ldquo;cat\u0026rdquo; to view the contents of the public and private keys.","keywords":["BGP","server","WireGuard"],"articleBody":"WireGuard is a point-to-point encryption network. I have been using it to manage/connect all my cloud servers.\nToday, let’s share how to use WireGuard!\nInstall WireGuard Basically, the WireGuard Install Page provides complete installation methods and commands for various versions, so you can refer to it directly.\nCreate WireGuard Profile First, go to the WireGuard installation folder. If it does not exist, please create it.\ncd /etc/wireguard Use the command to generate a public and private key, and use “cat” to view the contents of the public and private keys.\nwg genkey | tee privatekey | wg pubkey \u003e publickey Write down the public and private keys and create a configuration file.\nnano wg0.conf After entering the nano editor, we will paste the following configuration file and modify the public and private keys.\n[Interface] Address = 192.168.200.1/24 // You can customize the network segment here SaveConfig = true ListenPort = 51820 PrivateKey = [Peer] PublicKey = ","wordCount":"240","inLanguage":"en","datePublished":"2020-05-16T11:51:52Z","dateModified":"2020-05-16T11:51:52Z","author":{"@type":"Person","name":"SteveYi"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.steveyi.net/en/posts/how-to-use-wireguard/"},"publisher":{"@type":"Organization","name":"SteveYi's Blog","logo":{"@type":"ImageObject","url":"https://blog.steveyi.net/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.steveyi.net/en/ accesskey=h title="SteveYi's Blog (Alt + H)">SteveYi's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://blog.steveyi.net/ title=正體中文 aria-label=正體中文>Tw</a></li></ul></div></div><ul id=menu><li><a href=https://blog.steveyi.net/en/ title="Home Page"><span>Home</span></a></li><li><a href=https://blog.steveyi.net/en/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://blog.steveyi.net/en/about/ title=關於小易><span>About</span></a></li><li><a href=https://twitter.com/cool_small_yi title=Twitter><span>Twitter</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Using WireGuard on Linux</h1><div class=post-meta><span title='2020-05-16 11:51:52 +0000 UTC'>2020-05-16</span>&nbsp;·&nbsp;SteveYi&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=https://blog.steveyi.net/posts/how-to-use-wireguard/>Tw</a></li></ul></div></header><div class=post-content><p><a href=https://wireguard.com>WireGuard</a> is a point-to-point encryption network. I have been using it to manage/connect all my cloud servers.</p><p>Today, let&rsquo;s share how to use WireGuard!</p><h1 id=install-wireguard>Install WireGuard<a hidden class=anchor aria-hidden=true href=#install-wireguard>#</a></h1><p>Basically, the <a href=(https://www.wireguard.com/install/)>WireGuard Install Page</a> provides complete installation methods and commands for various versions, so you can refer to it directly.</p><h1 id=create-wireguard-profile>Create WireGuard Profile<a hidden class=anchor aria-hidden=true href=#create-wireguard-profile>#</a></h1><p>First, go to the WireGuard installation folder. If it does not exist, please create it.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cd /etc/wireguard
</span></span></code></pre></div><p><img loading=lazy src=https://static-a1.steveyi.net/media/blog/2020051611394599.png alt></p><p>Use the command to generate a public and private key, and use &ldquo;cat&rdquo; to view the contents of the public and private keys.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wg genkey | tee privatekey | wg pubkey &gt; publickey
</span></span></code></pre></div><p><img loading=lazy src=https://static-a1.steveyi.net/media/blog/2020051611445527.png alt></p><p>Write down the public and private keys and create a configuration file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>nano wg0.conf
</span></span></code></pre></div><p>After entering the nano editor, we will paste the following configuration file and modify the public and private keys.</p><pre tabindex=0><code>[Interface]
Address = 192.168.200.1/24 // You can customize the network segment here
SaveConfig = true
ListenPort = 51820
PrivateKey = &lt;Replace with your private key&gt;

[Peer]
PublicKey = &lt;The other party&#39;s public key&gt;
AllowedIPs = 192.168.200.2/24 // The other party&#39;s network segment
</code></pre><p>Enter Crtl + X and then y to exit the editor.</p><p>Use the following command to save and enable WireGuard.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wg-quick save wg0
</span></span><span style=display:flex><span>wg-quick down wg0
</span></span><span style=display:flex><span>wg-quick up wg0
</span></span></code></pre></div><p>PS. If you need to automatically start WireGuard after the system starts up, you can use the following command to write it into systemctl.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>systemctl enable wg-quick@wg0
</span></span></code></pre></div><p>Then try pinging. If it responds, it means success!</p><p><img loading=lazy src=https://static-a1.steveyi.net/media/blog/2020051612102187.png alt></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.steveyi.net/en/tags/bgp/>BGP</a></li><li><a href=https://blog.steveyi.net/en/tags/server/>server</a></li><li><a href=https://blog.steveyi.net/en/tags/wireguard/>WireGuard</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://blog.steveyi.net/en/>SteveYi's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>