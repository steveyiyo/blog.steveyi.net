<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Configuring OOB Network on Arista | SteveYi's Blog</title><meta name=keywords content><meta name=description content="Recently deployed an Arista switch. As L3 Routing was configured on this switch, it was not possible to set the OOB network as the default route..."><meta name=author content="SteveYi Yo"><link rel=canonical href=https://blog.steveyi.net/en/posts/arista-mgmt/><link crossorigin=anonymous href=/assets/css/stylesheet.bccfefac377bc340f06c260aed1bddf49a4354816d7c570d6aac75a997986c95.css integrity="sha256-vM/vrDd7w0DwbCYK7Rvd9JpDVIFtfFcNaqx1qZeYbJU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.steveyi.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.steveyi.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.steveyi.net/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.steveyi.net/apple-touch-icon.png><link rel=mask-icon href=https://blog.steveyi.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.steveyi.net/en/posts/arista-mgmt/><link rel=alternate hreflang=tw href=https://blog.steveyi.net/posts/arista-mgmt/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-CPGWT2M3VT"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CPGWT2M3VT",{anonymize_ip:!1})}</script><meta property="og:title" content="Configuring OOB Network on Arista"><meta property="og:description" content="Recently deployed an Arista switch. As L3 Routing was configured on this switch, it was not possible to set the OOB network as the default route..."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.steveyi.net/en/posts/arista-mgmt/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-05T02:58:47+08:00"><meta property="article:modified_time" content="2022-07-05T02:58:47+08:00"><meta property="og:site_name" content="SteveYi's Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Configuring OOB Network on Arista"><meta name=twitter:description content="Recently deployed an Arista switch. As L3 Routing was configured on this switch, it was not possible to set the OOB network as the default route..."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.steveyi.net/en/posts/"},{"@type":"ListItem","position":2,"name":"Configuring OOB Network on Arista","item":"https://blog.steveyi.net/en/posts/arista-mgmt/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Configuring OOB Network on Arista","name":"Configuring OOB Network on Arista","description":"Recently deployed an Arista switch. As L3 Routing was configured on this switch, it was not possible to set the OOB network as the default route...","keywords":[],"articleBody":"Recently deployed an Arista switch. As L3 Routing was configured on this switch, it was not possible to set the OOB network as the default route.\nTo solve this problem, we created a VRF to isolate the OOB network.\nConfiguration Steps First, we define a new VRF and rd\nvrf definition OOB rd 10:1 Next, we configure the MGMT interface\ninterface Management1 vrf forwarding OOB ip address 10.39.0.2/24 Set a static route and enable the routing feature of VRF\nip route vrf OOB 0.0.0.0/0 10.39.0.1 ip routing vrf OOB Then, show ip route vrf OOB can be entered to view the configured routes\narista#show ip route vrf OOB VRF name: OOB Codes: C - connected, S - static, K - kernel, O - OSPF, IA - OSPF inter area, E1 - OSPF external type 1, E2 - OSPF external type 2, N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type2, B I - iBGP, B E - eBGP, R - RIP, I L1 - ISIS level 1, I L2 - ISIS level 2, O3 - OSPFv3, A B - BGP Aggregate, A O - OSPF Summary, NG - Nexthop Group Static Route, V - VXLAN Control Service Gateway of last resort: S 0.0.0.0/0 [1/0] via 10.39.0.1, Management1 C 10.39.0.0/24 is directly connected, Management1 Testing Use ping vrf OOB ip 1.1.1.1 to test connectivity\narista#ping vrf OOB ip 1.1.1.1 PING 1.1.1.1 (1.1.1.1) 72(100) bytes of data. 80 bytes from 1.1.1.1: icmp_seq=1 ttl=59 time=0.623 ms 80 bytes from 1.1.1.1: icmp_seq=2 ttl=59 time=0.417 ms 80 bytes from 1.1.1.1: icmp_seq=3 ttl=59 time=0.419 ms 80 bytes from 1.1.1.1: icmp_seq=4 ttl=59 time=0.460 ms 80 bytes from 1.1.1.1: icmp_seq=5 ttl=59 time=0.460 ms --- 1.1.1.1 ping statistics --- 5 packets transmitted, 5 received, 0% packet loss, time 4ms rtt min/avg/max/mdev = 0.417/0.475/0.623/0.080 ms, ipg/ewma 1.004/0.548 ms ","wordCount":"302","inLanguage":"en","datePublished":"2022-07-05T02:58:47+08:00","dateModified":"2022-07-05T02:58:47+08:00","author":{"@type":"Person","name":"SteveYi Yo"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.steveyi.net/en/posts/arista-mgmt/"},"publisher":{"@type":"Organization","name":"SteveYi's Blog","logo":{"@type":"ImageObject","url":"https://blog.steveyi.net/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.steveyi.net/en/ accesskey=h title="SteveYi's Blog (Alt + H)">SteveYi's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://blog.steveyi.net/ title=正體中文 aria-label=正體中文>Tw</a></li></ul></div></div><ul id=menu><li><a href=https://blog.steveyi.net/en/ title="Home Page"><span>Home</span></a></li><li><a href=https://blog.steveyi.net/en/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://blog.steveyi.net/en/about/ title=關於小易><span>About</span></a></li><li><a href=https://twitter.com/cool_small_yi title=Twitter><span>Twitter</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Configuring OOB Network on Arista</h1><div class=post-description>Recently deployed an Arista switch. As L3 Routing was configured on this switch, it was not possible to set the OOB network as the default route...</div><div class=post-meta><span title='2022-07-05 02:58:47 +0800 +0800'>2022-07-05</span>&nbsp;·&nbsp;SteveYi Yo&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=https://blog.steveyi.net/posts/arista-mgmt/>Tw</a></li></ul></div></header><div class=post-content><p>Recently deployed an Arista switch. As L3 Routing was configured on this switch, it was not possible to set the OOB network as the default route.</p><p>To solve this problem, we created a VRF to isolate the OOB network.</p><h2 id=configuration-steps>Configuration Steps<a hidden class=anchor aria-hidden=true href=#configuration-steps>#</a></h2><p>First, we define a new VRF and rd</p><pre tabindex=0><code>vrf definition OOB
   rd 10:1
</code></pre><p>Next, we configure the MGMT interface</p><pre tabindex=0><code>interface Management1
   vrf forwarding OOB
   ip address 10.39.0.2/24
</code></pre><p>Set a static route and enable the routing feature of VRF</p><pre tabindex=0><code>ip route vrf OOB 0.0.0.0/0 10.39.0.1
ip routing vrf OOB
</code></pre><p>Then, <code>show ip route vrf OOB</code> can be entered to view the configured routes</p><pre tabindex=0><code>arista#show ip route vrf OOB

VRF name: OOB
Codes: C - connected, S - static, K - kernel, 
       O - OSPF, IA - OSPF inter area, E1 - OSPF external type 1,
       E2 - OSPF external type 2, N1 - OSPF NSSA external type 1,
       N2 - OSPF NSSA external type2, B I - iBGP, B E - eBGP,
       R - RIP, I L1 - ISIS level 1, I L2 - ISIS level 2,
       O3 - OSPFv3, A B - BGP Aggregate, A O - OSPF Summary,
       NG - Nexthop Group Static Route, V - VXLAN Control Service

Gateway of last resort:
 S      0.0.0.0/0 [1/0] via 10.39.0.1, Management1

 C      10.39.0.0/24 is directly connected, Management1
</code></pre><h2 id=testing>Testing<a hidden class=anchor aria-hidden=true href=#testing>#</a></h2><p>Use <code>ping vrf OOB ip 1.1.1.1</code> to test connectivity</p><pre tabindex=0><code>arista#ping vrf OOB ip 1.1.1.1 
PING 1.1.1.1 (1.1.1.1) 72(100) bytes of data.
80 bytes from 1.1.1.1: icmp_seq=1 ttl=59 time=0.623 ms
80 bytes from 1.1.1.1: icmp_seq=2 ttl=59 time=0.417 ms
80 bytes from 1.1.1.1: icmp_seq=3 ttl=59 time=0.419 ms
80 bytes from 1.1.1.1: icmp_seq=4 ttl=59 time=0.460 ms
80 bytes from 1.1.1.1: icmp_seq=5 ttl=59 time=0.460 ms

--- 1.1.1.1 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4ms
rtt min/avg/max/mdev = 0.417/0.475/0.623/0.080 ms, ipg/ewma 1.004/0.548 ms
</code></pre></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://blog.steveyi.net/en/>SteveYi's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>